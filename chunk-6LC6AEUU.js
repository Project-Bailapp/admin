import"./chunk-BFWLTUMO.js";import{a as A}from"./chunk-FNHILXFP.js";import{g as D,l as $}from"./chunk-63DFQAL4.js";import{$b as _,Aa as C,Ib as F,Jb as S,R as T,Ua as E,Va as h,W as p,Wa as w,X as d,Xa as k,Ya as y,Za as l,_a as c,a as v,b as x,da as f,db as g,eb as u,gb as r,qb as a,sa as m,sb as V}from"./chunk-6UE5M2JL.js";var R=(o,t)=>t.id;function I(o,t){if(o&1){let e=g();l(0,"button",6),u("click",function(){p(e);let n=r().$implicit,s=r();return d(s.submitChange(n))}),a(1," \u2795 "),c()}if(o&2){let e=r().$implicit;y("disabled",!e.name)}}function P(o,t){if(o&1){let e=g();l(0,"button",7),u("click",function(){p(e);let n=r().$implicit,s=r();return d(s.submitChange(n))}),a(1," \u2705 "),c(),l(2,"button",8),u("click",function(){p(e);let n=r().$implicit,s=r();return d(s.cancelChanges(n.id))}),a(3," \u2716\uFE0F "),c()}if(o&2){let e=r().$implicit;y("disabled",!e.name)}}function j(o,t){if(o&1){let e=g();l(0,"button",9),u("click",function(){p(e);let n=r().$implicit,s=r();return d(s.toggleEdit(n.id))}),a(1," \u270F\uFE0F "),c(),l(2,"button",10),u("click",function(){p(e);let n=r().$implicit,s=r();return d(s.deleteEvent(n.id))}),a(3," \u{1F5D1}\uFE0F "),c()}}function q(o,t){if(o&1){let e=g();l(0,"div",2)(1,"span",3),a(2),c(),l(3,"read-edit-input",4),u("valueChange",function(n){let s=p(e).$implicit,b=r();return d(b.eventTypeEdit({id:s.id,newValue:n}))}),c(),E(4,I,2,1,"button",5)(5,P,4,1)(6,j,4,0),c()}if(o&2){let e=t.$implicit,i=e.id?r().editing()[e.id]:!0;m(2),V("[",e.id||"new","]"),m(),y("editMode",i)("value",e.name),m(),h(e.id?i?5:6:4)}}var M=class o{router=T(D);eventTypeClient=T($);eventTypes=S(()=>{let t=_.eventTypes(),e=Object.entries(t).map(([i,n])=>({id:i,name:n}));return e.push({id:"",name:""}),e});editing=f({});constructor(){F(()=>{_.token()||this.router.navigateByUrl("/events")})}toggleEdit(t){this.editing.update(e=>x(v({},e),{[t]:!e[t]}))}eventTypeEdit({id:t,newValue:e}){this.eventTypes.update(i=>i.map(n=>n.id===t?{id:t,name:e}:n))}submitChange({id:t,name:e}){if(!confirm(t?"Crear?":"Actualizar?"))return;let i=_.eventTypes()[+t];if(e===i){this.toggleEdit(t);return}(t?this.eventTypeClient.update({id:+t,typeName:e}):this.eventTypeClient.create(e)).subscribe(({id:s,typeName:b})=>{_.eventTypes.update(N=>x(v({},N),{[s]:b})),t&&this.toggleEdit(t)})}cancelChanges(t){let e=_.eventTypes()[+t];this.eventTypeEdit({id:t,newValue:e}),this.toggleEdit(t)}deleteEvent(t){confirm("Borrar?")&&this.eventTypeClient.delete(t).subscribe(()=>{_.eventTypes.update(e=>(delete e[+t],v({},e)))})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["ng-component"]],hostAttrs:[1,"contents"],decls:5,vars:0,consts:[[1,"w-full","text-2xl","font-bold","text-center","py-1","bg-gray-950","sticky","top-0","z-2"],[1,"flex","flex-col","gap-2","items-stretch"],[1,"flex","gap-1","hover:bg-gray-900","transition","rounded-sm","p-2","items-center"],[1,"text-gray-400","basis-10"],[1,"*:grow-1",3,"valueChange","editMode","value"],[1,"rounded-full","bg-cyan-800","hove:bg-cyan-800","hover:bg-cyan-600","p-1","cursor-pointer","[&[disabled]]:opacity-50","[&[disabled]]:bg-gray-800",3,"disabled"],[1,"rounded-full","bg-cyan-800","hove:bg-cyan-800","hover:bg-cyan-600","p-1","cursor-pointer","[&[disabled]]:opacity-50","[&[disabled]]:bg-gray-800",3,"click","disabled"],[1,"rounded-full","bg-emerald-900","hover:bg-emerald-800","p-1","cursor-pointer","[&[disabled]]:opacity-50","[&[disabled]]:bg-gray-800",3,"click","disabled"],[1,"rounded-full","bg-gray-950","hover:bg-gray-700","p-1","cursor-pointer",3,"click"],[1,"rounded-full","hover:bg-yellow-800","p-1","cursor-pointer",3,"click"],[1,"rounded-full","bg-red-900","hover:bg-red-700","p-1","cursor-pointer",3,"click"]],template:function(e,i){e&1&&(l(0,"h1",0),a(1," Tipos de evento "),c(),l(2,"div",1),w(3,q,7,4,"div",2,R),c()),e&2&&(m(3),k(i.eventTypes()))},dependencies:[A],encapsulation:2,changeDetection:0})};export{M as EventTypes};
