import{a as L}from"./chunk-T5UETTZI.js";import{a as G,b as N,c as H,d as O}from"./chunk-FTM4KB4U.js";import{a as j}from"./chunk-7P2UISXG.js";import"./chunk-R3PIJHPI.js";import{a as $}from"./chunk-FNHILXFP.js";import{d as F,g as q,k as R}from"./chunk-63DFQAL4.js";import{$a as b,$b as z,Aa as S,Bb as D,Cb as k,Jb as y,R as x,Sa as V,Ta as I,Ua as m,Va as C,Vb as U,W as _,X as p,Xb as B,Ya as v,Za as r,_a as l,db as f,eb as u,gb as d,l as E,nb as T,pb as M,qa as w,qb as s,rb as h,sa as o,sb as g,xb as A,zb as P}from"./chunk-6UE5M2JL.js";var K=a=>({"[&]:rotate-90":a});function Q(a,i){a&1&&(r(0,"h1",0),s(1,"New Event"),l())}function W(a,i){if(a&1&&(r(0,"span"),s(1),l()),a&2){let e=d();o(),g("[",e.id,"] ")}}function X(a,i){if(a&1&&(r(0,"small",21)(1,"strong"),s(2,"Created:\xA0"),l(),s(3),D(4,"date"),l()),a&2){let e=d(2);o(3),h(k(4,1,e.created,"dd-MMM-yyyy @ hh:mm"))}}function Y(a,i){if(a&1&&(r(0,"small",21)(1,"strong"),s(2,"Updated:\xA0"),l(),s(3),D(4,"date"),l()),a&2){let e=d(2);o(3),h(k(4,1,e.updated,"dd-MMM-yyyy @ hh:mm"))}}function Z(a,i){if(a&1&&(r(0,"div",19),m(1,X,5,4,"small",21),m(2,Y,5,4,"small",21),l()),a&2){let e=d();o(),C(e.created?1:-1),o(),C(e.updated?2:-1)}}function ee(a,i){if(a&1&&(r(0,"div"),I("animate-top-down"),V("animate-bottom-up"),b(1,"event-card",25),l()),a&2){let e=d(2);o(),v("id",e.id)("title",e.title)("bannerUrl",e.bannerUrl)("description",e.description)("price",e.price)("location",e.location)("danceTypeIds",e.danceTypeIds)("eventTypeIds",e.eventTypeIds)("eventDate",e.eventDate)("updated",e.updated)}}function te(a,i){if(a&1){let e=f();r(0,"button",26),u("click",function(){_(e);let t=d(3);return p(t.editing.set(!t.editing()))}),s(1," Editar? "),l(),r(2,"button",27),u("click",function(){_(e);let t=d(3);return p(t.deleteEvent())}),s(3," Borrar \u26A0\uFE0F "),l()}}function ie(a,i){if(a&1){let e=f();r(0,"button",26),u("click",function(){_(e);let t=d(3);return p(t.sendEvent())}),s(1),l(),r(2,"button",28),u("click",function(){_(e);let t=d(3);return p(t.onCancelEdit())}),s(3," Cancelar "),l()}if(a&2){let e=d(2);o(),g(" ",e.id?"Actualizar":"Crear"," ")}}function ne(a,i){if(a&1){let e=f();r(0,"div",20)(1,"h2",22),u("click",function(){_(e);let t=d(2);return p(t.showAdminCardPreview.set(!t.showAdminCardPreview()))}),s(2," Card preview "),r(3,"small",23),s(4,"\u27A4 "),l()(),m(5,ee,2,10,"div"),r(6,"div",24),m(7,te,4,0)(8,ie,4,1),l()()}if(a&2){let e=d(2);o(3),M(P(4,K,e.showAdminCardPreview())),o(2),C(e.showAdminCardPreview()?5:-1),o(2),C(e.editing()?8:7)}}function ae(a,i){if(a&1){let e=f();m(0,Q,2,0,"h1",0),r(1,"div",1)(2,"div",2)(3,"read-edit-input",3),u("valueChange",function(t){let c=_(e);return p(c.title=t||"")}),r(4,"h1",4),m(5,W,2,1,"span"),s(6),l()(),r(7,"button",5),u("click",function(){_(e);let t=d();return p(t.goBack())}),s(8,"\u2190"),l()(),r(9,"div",6)(10,"div",7)(11,"read-edit-input",8),u("valueChange",function(t){let c=_(e);return p(c.description=t)}),l(),r(12,"read-edit-input",9),u("valueChange",function(t){let c=_(e);return p(c.bannerUrl=t)}),r(13,"a",10),b(14,"img",11),l()()(),r(15,"div",12)(16,"dance-type-pills",13),u("typeClicked",function(t){_(e);let c=d();return p(c.editDanceTypes(t))}),l(),r(17,"read-edit-input",14),u("valueChange",function(t){let c=_(e);return p(c.location=t||"")}),r(18,"a",15),u("click",function(t){let c=_(e);return d().openGMapsLink(c.location),p(t.stopPropagation())}),s(19),l()(),r(20,"read-edit-input",16),u("valueChange",function(t){let c=_(e);return p(c.price=+(t||0))}),r(21,"p"),s(22),l()(),r(23,"read-edit-input",17),u("valueChange",function(t){let c=_(e);return p(c.eventDate=t)}),l(),r(24,"event-type-tags",18),u("tagClicked",function(t){_(e);let c=d();return p(c.editEventType(t))}),l()()(),m(25,Z,3,2,"div",19),m(26,ne,9,6,"div",20),l()}if(a&2){let e=i,n=d();C(e.id?-1:0),o(),T("--read-edit-input__min-w",n.editing()?"20rem":null),o(2),v("editMode",n.editing())("value",e.title),o(2),C(n.state.token()?5:-1),o(),g(" ",e.title," "),o(5),v("editMode",n.editing())("value",e.description),o(),T("--read-edit-input__min-w","20rem"),v("editMode",n.editing())("value",e.bannerUrl),o(),v("href",e.bannerUrl,w),o(),v("src",e.bannerUrl,w),o(2),v("danceTypeIds",e.danceTypeIds)("editMode",n.editing()),o(),v("value",e.location)("editMode",n.editing()),o(2),g(" ",e.location," "),o(),v("value",e.price)("editMode",n.editing());let t=e.price&&e.price>0?"\u20AC"+e.price:"Gratis";o(2),h(t),o(),v("editMode",n.editing())("value",e.eventDate),o(),v("eventTypeIds",e.eventTypeIds)("editMode",n.editing()),o(),C(n.state.token()?25:-1),o(),C(n.state.token()?26:-1)}}var J=class a{router=x(q);routeData=j(x(F).data);location=x(U);eventClient=x(R);state=z;editing=y(()=>{let i=this.state.token(),e=this.event();return i!=null&&!e.id});event=y(()=>{let{event:i}=this.routeData();return!i&&this.state.token()?new L:i});showAdminCardPreview=y(()=>this.state.token()!=null);goBack=()=>this.location.back();openGMapsLink=G;editDanceTypes(i){if(!this.editing())return;let e=this.event().danceTypeIds;e.includes(i)?this.event().danceTypeIds=e.filter(n=>n!==i):this.event().danceTypeIds=e.concat([i])}editEventType(i){if(!this.editing())return;let e=this.event().eventTypeIds;e.includes(i)?this.event().eventTypeIds=e.filter(n=>n!==i):this.event().eventTypeIds=e.concat(i)}sendEvent(){if(confirm("Seguro?")){let i=this.event(),e=i.id?this.eventClient.update(i):this.eventClient.create(i);i&&e.subscribe(n=>{this.editing.set(!this.editing()),this.event.set(n)})}}onCancelEdit(){if(!this.event().id){this.router.navigateByUrl("events");return}this.editing.set(!this.editing())}deleteEvent(){if(confirm("Seguro quieres borrar? para revertir hay que hablar con los desarrolladores")){let i=this.event().id;(i?this.eventClient.delete(i):E(void 0)).subscribe(()=>{confirm(`Evento ${i||"nuevo"} borrado`),this.router.navigateByUrl("events")})}}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["ng-component"]],hostAttrs:[1,"contents"],features:[A()],decls:1,vars:1,consts:[[1,"w-full","text-2xl","font-bold","text-center","py-1","bg-gray-950","sticky","top-0","z-2"],["detail","",1,"grow-1","flex","flex-col"],["detail__header","",1,"flex","flex-row","justify-between","items-center","my-2"],["label","T\xEDtulo",3,"valueChange","editMode","value"],[1,"text-2xl","font-bold"],[1,"text-2xl","bg-blue-400","cursor-pointer","rounded-full","aspect-square","w-8",3,"click"],["detail__content","",1,"flex","flex-row","grow-1","gap-4","flex-wrap"],["detail__left","",1,"flex","flex-col","grow-1","basis-0","shrink-0","gap-4","items-start"],["label","Descripci\xF3n","type","textarea",3,"valueChange","editMode","value"],["label","Banner Url","type","img",3,"valueChange","editMode","value"],["target","_blank",3,"href"],["alt"," ",1,"max-w-[min(20rem,","50dvh)]","rounded-md","bg-[image:url(https://i.imgur.com/wDi0xHn.jpeg)]","aspect-[auto_1/1]","bg-center","bg-cover",3,"src"],["detail__right","",1,"flex","flex-col","grow-1","basis-0","shrink-0","gap-4"],[3,"typeClicked","danceTypeIds","editMode"],["label","Direcci\xF3n",3,"valueChange","value","editMode"],[1,"cursor-pointer","italic","hover:text-blue-400",3,"click"],["label","Precio","prefix","\u20AC",3,"valueChange","value","editMode"],["label","Fecha del evento","type","datetime",3,"valueChange","editMode","value"],[3,"tagClicked","eventTypeIds","editMode"],[1,"self-center"],["detail__admin-card-preview","",1,"min-w-80","my-2","flex","flex-col","bg-green-900","gap-2","rounded-xl","h-fit","self-center","sticky","bottom-0"],[1,"flex"],[1,"flex","gap-2","justify-center","items-baseline","content-center","text-md","text-center","font-bold","cursor-pointer",3,"click"],[1,"text-xs","rotate-270","transition-transform","duration-200"],[1,"rounded-sm","flex","overflow-hidden","z-1"],[1,"*:max-w-80",3,"id","title","bannerUrl","description","price","location","danceTypeIds","eventTypeIds","eventDate","updated"],[1,"grow-1","basis-0","bg-blue-900","px-2","py-1","cursor-pointer","hover:bg-blue-950","transition-colors",3,"click"],[1,"grow-1","basis-0","bg-red-900","px-2","py-1","cursor-pointer","hover:bg-neutral-950","transition-colors",3,"click"],[1,"grow-1","basis-0","bg-gray-900","px-2","py-1","cursor-pointer","hover:bg-neutral-950","transition-colors",3,"click"]],template:function(e,n){if(e&1&&m(0,ae,27,29),e&2){let t;C((t=n.event())?0:-1,t)}},dependencies:[$,O,N,H,B],encapsulation:2,changeDetection:0})};export{J as Detail};
