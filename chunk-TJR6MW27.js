import{a as M}from"./chunk-R3PIJHPI.js";import"./chunk-BFWLTUMO.js";import{a as N}from"./chunk-FNHILXFP.js";import{g as B,m as A}from"./chunk-63DFQAL4.js";import{$a as k,$b as _,Aa as v,Ib as S,Jb as $,R as f,Ua as h,Va as E,W as d,Wa as w,X as p,Xa as D,Ya as b,Za as s,_a as a,a as y,b as T,da as C,db as g,eb as u,gb as o,nb as V,qb as l,sa as m,sb as F}from"./chunk-6UE5M2JL.js";var I=(c,t)=>t.id;function j(c,t){if(c&1){let e=g();s(0,"button",7),u("click",function(){d(e);let n=o().$implicit,i=o();return p(i.submitChange(n))}),l(1," \u2795 "),a()}if(c&2){let e=o().$implicit;b("disabled",!e.name)}}function q(c,t){if(c&1){let e=g();s(0,"button",8),u("click",function(){d(e);let n=o().$implicit,i=o();return p(i.submitChange(n))}),l(1," \u2705 "),a(),s(2,"button",9),u("click",function(){d(e);let n=o().$implicit,i=o();return p(i.cancelChanges(n.id))}),l(3," \u2716\uFE0F "),a()}if(c&2){let e=o().$implicit;b("disabled",!e.name)}}function z(c,t){if(c&1){let e=g();s(0,"button",10),u("click",function(){d(e);let n=o().$implicit,i=o();return p(i.toggleEdit(n.id))}),l(1," \u270F\uFE0F "),a(),s(2,"button",11),u("click",function(){d(e);let n=o().$implicit,i=o();return p(i.deleteEvent(n.id))}),l(3," \u{1F5D1}\uFE0F "),a()}}function O(c,t){if(c&1){let e=g();s(0,"div",2)(1,"span",3),l(2),a(),k(3,"span",4),s(4,"read-edit-input",5),u("valueChange",function(n){let i=d(e).$implicit,x=o();return p(x.danceTypeEdit({id:i.id,newValue:n}))}),a(),h(5,j,2,1,"button",6)(6,q,4,1)(7,z,4,0),a()}if(c&2){let e=t.$implicit,r=t.$index,n=o(),i=e.id?n.editing()[e.id]:!0;m(2),F("[",e.id||"new","]"),m(),V("background-color",n.colorByType[r]),m(),b("editMode",i)("value",e.name),m(),E(e.id?i?6:7:5)}}var P=class c{router=f(B);danceTypeClient=f(A);danceTypes=$(()=>{let t=_.danceTypes(),e=Object.entries(t).map(([r,n])=>({id:r,name:n}));return e.push({id:"",name:""}),e});editing=C({});colorByType=M;constructor(){S(()=>{_.token()||this.router.navigateByUrl("/events")})}toggleEdit(t){this.editing.update(e=>T(y({},e),{[t]:!e[t]}))}danceTypeEdit({id:t,newValue:e}){this.danceTypes.update(r=>r.map(n=>n.id===t?{id:t,name:e}:n))}submitChange({id:t,name:e}){if(!confirm(t?"Crear?":"Actualizar?"))return;let r=_.danceTypes()[+t];if(e===r){this.toggleEdit(t);return}(t?this.danceTypeClient.update({id:+t,typeName:e}):this.danceTypeClient.create(e)).subscribe(({id:i,typeName:x})=>{_.danceTypes.update(R=>T(y({},R),{[i]:x})),t&&this.toggleEdit(t)})}cancelChanges(t){let e=_.danceTypes()[+t];this.danceTypeEdit({id:t,newValue:e}),this.toggleEdit(t)}deleteEvent(t){confirm("Borrar?")&&this.danceTypeClient.delete(t).subscribe(()=>{_.danceTypes.update(e=>(delete e[+t],y({},e)))})}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=v({type:c,selectors:[["ng-component"]],hostAttrs:[1,"contents"],decls:5,vars:0,consts:[[1,"w-full","text-2xl","font-bold","text-center","py-1","bg-gray-950","sticky","top-0","z-2"],[1,"flex","flex-col","gap-2","items-stretch"],[1,"flex","gap-1","hover:bg-gray-900","transition","rounded-sm","p-2","items-center"],[1,"text-gray-400","basis-10"],[1,"w-4","h-4","bg-green-900","rounded-full"],[1,"*:grow-1",3,"valueChange","editMode","value"],[1,"rounded-full","bg-cyan-800","hove:bg-cyan-800","hover:bg-cyan-600","p-1","cursor-pointer","[&[disabled]]:opacity-50","[&[disabled]]:bg-gray-800",3,"disabled"],[1,"rounded-full","bg-cyan-800","hove:bg-cyan-800","hover:bg-cyan-600","p-1","cursor-pointer","[&[disabled]]:opacity-50","[&[disabled]]:bg-gray-800",3,"click","disabled"],[1,"rounded-full","bg-emerald-900","hover:bg-emerald-800","p-1","cursor-pointer","[&[disabled]]:opacity-50","[&[disabled]]:bg-gray-800",3,"click","disabled"],[1,"rounded-full","bg-gray-950","hover:bg-gray-700","p-1","cursor-pointer",3,"click"],[1,"rounded-full","hover:bg-yellow-800","p-1","cursor-pointer",3,"click"],[1,"rounded-full","bg-red-900","hover:bg-red-700","p-1","cursor-pointer",3,"click"]],template:function(e,r){e&1&&(s(0,"h1",0),l(1," Tipos de baile "),a(),s(2,"div",1),w(3,O,8,6,"div",2,I),a()),e&2&&(m(3),D(r.danceTypes()))},dependencies:[N],encapsulation:2,changeDetection:0})};export{P as DanceTypes};
